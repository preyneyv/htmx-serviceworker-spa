<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title></title>
    <script src="https://unpkg.com/htmx.org@1.9.10"></script>

    <script>
      async function registerServiceWorker() {
        try {
          const registration = await navigator.serviceWorker.register(
            "/sw.js",
            {
              scope: "/",
            }
          );
          if (registration.installing) {
            console.log("Service worker installing");
          } else if (registration.waiting) {
            console.log("Service worker waiting");
          } else if (registration.active) {
            console.log("Service worker active");
          }
        } catch (error) {
          console.error("Couldnt register service worker", error);
        }
      }
      registerServiceWorker();
      navigator.serviceWorker.ready.then((registration) => {
        registration.active.postMessage(
          JSON.stringify({
            handler: "initialize",
            data: { host: window.location.host },
          })
        );
      });
    </script>
  </head>
  <body>
    <button hx-post="/clicked" hx-swap="outerHTML">
      HELLO IM A BUTTON PLS CLICK ME :D
    </button>
  </body>
</html>
